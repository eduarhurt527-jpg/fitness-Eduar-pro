<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>üèÜ FITNESS PRO - Tu Entrenador Personal</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        :root {
            --primary: #ff6b6b;
            --secondary: #4ecdc4;
            --accent: #45b7d1;
            --dark: #292f36;
            --light: #f7fff7;
            --gray: #4a4a4a;
            --success: #2ecc71;
            --warning: #f39c12;
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        body {
            background: linear-gradient(135deg, #1a1a2e, #16213e, #0f3460);
            color: var(--light);
            min-height: 100vh;
            padding: 20px;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        header {
            text-align: center;
            padding: 30px 0;
            background: rgba(0,0,0,0.3);
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            position: relative;
        }
        h1 {
            font-size: 2.8rem;
            margin-bottom: 10px;
            color: var(--primary);
            text-shadow: 0 0 10px rgba(255,107,107,0.5);
            background: linear-gradient(to right, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .user-profile {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        .bmi-calculator {
            background: rgba(0,0,0,0.3);
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            min-width: 250px;
        }
        .bmi-calculator input {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border-radius: 8px;
            border: 2px solid var(--secondary);
            background: #1a1a2e;
            color: white;
            text-align: center;
            font-size: 1rem;
        }
        .bmi-calculator button {
            background: var(--secondary);
            color: var(--dark);
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            margin: 10px 0;
            transition: all 0.3s ease;
        }
        .bmi-calculator button:hover {
            transform: scale(1.05);
            box-shadow: 0 0 10px var(--secondary);
        }
        .bmi-result {
            font-size: 1.5rem;
            font-weight: bold;
            margin: 15px 0;
            padding: 10px;
            border-radius: 8px;
            background: var(--dark);
        }
        .timer-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            margin: 30px 0;
            background: rgba(0,0,0,0.3);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        .timer-display {
            font-size: 4rem;
            font-weight: bold;
            background: var(--dark);
            padding: 20px 40px;
            border-radius: 15px;
            box-shadow: 0 0 20px rgba(0,0,0,0.5);
            min-width: 200px;
            text-align: center;
            color: var(--secondary);
            text-shadow: 0 0 10px var(--secondary);
            transition: all 0.3s ease;
        }
        .timer-controls {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }
        .timer-controls button {
            padding: 15px 30px;
            font-size: 1.1rem;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            margin: 5px;
            min-width: 120px;
        }
        .start-btn { background: var(--success); color: white; }
        .pause-btn { background: var(--warning); color: white; }
        .reset-btn { background: var(--primary); color: white; }
        .timer-controls button:hover {
            transform: scale(1.05);
            box-shadow: 0 0 15px currentColor;
        }
        .workout-section {
            background: rgba(0,0,0,0.3);
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        h2 {
            color: var(--secondary);
            margin-bottom: 20px;
            font-size: 1.8rem;
            border-bottom: 3px solid var(--secondary);
            padding-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .exercise-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 25px;
            margin-top: 20px;
        }
        .exercise-card {
            background: var(--dark);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            border: 2px solid transparent;
        }
        .exercise-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 25px rgba(0,0,0,0.4);
            border-color: var(--secondary);
        }
        .exercise-card h3 {
            color: var(--primary);
            margin: 15px 0 15px;
            font-size: 1.4rem;
        }
        .exercise-icon {
            font-size: 4rem;
            margin: 15px 0;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 80px;
            background: rgba(78, 205, 196, 0.1);
            border-radius: 12px;
        }
        .exercise-card p {
            color: #ccc;
            font-size: 0.95rem;
            margin-bottom: 15px;
            line-height: 1.4;
        }
        .exercise-duration {
            background: rgba(255, 107, 107, 0.2);
            padding: 8px;
            border-radius: 8px;
            font-weight: bold;
            color: var(--primary);
        }
        .exercise-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        .modal-content {
            background: var(--dark);
            padding: 30px;
            border-radius: 20px;
            width: 100%;
            max-width: 600px;
            box-shadow: 0 0 30px rgba(0,0,0,0.5);
            position: relative;
            animation: modalAppear 0.3s ease;
        }
        @keyframes modalAppear {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }
        .close-modal {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 1.5rem;
            cursor: pointer;
            color: #aaa;
            transition: color 0.3s;
            background: none;
            border: none;
            padding: 5px;
        }
        .close-modal:hover {
            color: var(--primary);
        }
        .modal-header {
            text-align: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--secondary);
        }
        .modal-header h3 {
            color: var(--secondary);
            font-size: 2rem;
        }
        .exercise-form {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        .form-group label {
            font-weight: bold;
            color: var(--secondary);
            font-size: 1.1rem;
        }
        .form-group input, .form-group select {
            padding: 12px;
            border-radius: 8px;
            border: 2px solid var(--accent);
            background: #1a1a2e;
            color: white;
            font-size: 1rem;
        }
        .form-actions {
            display: flex;
            gap: 15px;
            margin-top: 25px;
            justify-content: center;
            flex-wrap: wrap;
        }
        .form-actions button {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            font-size: 1.1rem;
        }
        .save-btn { background: var(--success); color: white; }
        .cancel-btn { background: var(--gray); color: white; }
        .form-actions button:hover {
            transform: scale(1.05);
        }
        .stats-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        .stat-card {
            background: rgba(0,0,0,0.3);
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            transition: all 0.3s ease;
        }
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.4);
        }
        .stat-card h3 {
            font-size: 2.5rem;
            color: var(--secondary);
            margin-bottom: 10px;
            font-weight: bold;
        }
        .stat-card p {
            color: #ccc;
            font-size: 0.95rem;
            font-weight: 500;
        }
        .weekly-plan {
            background: rgba(0,0,0,0.3);
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        .week-days {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 15px;
            margin-top: 20px;
        }
        .day-card {
            background: var(--dark);
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            min-height: 180px;
            position: relative;
            border: 2px solid transparent;
            display: flex;
            flex-direction: column;
        }
        .day-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.4);
            border-color: var(--accent);
        }
        .day-card h4 {
            color: var(--accent);
            margin-bottom: 15px;
            font-size: 1.2rem;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(255,255,255,0.2);
        }
        .day-exercises {
            font-size: 0.9rem;
            color: #ccc;
            line-height: 1.4;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            gap: 5px;
            margin-bottom: 15px;
        }
        .exercise-item {
            background: rgba(255,107,107,0.2);
            padding: 5px 10px;
            border-radius: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.85rem;
        }
        .exercise-item button {
            background: none;
            border: none;
            color: var(--primary);
            cursor: pointer;
            font-size: 1rem;
            padding: 0 5px;
        }
        .day-actions {
            display: flex;
            gap: 10px;
            justify-content: center;
        }
        .add-exercise-btn, .edit-day-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s;
            flex: 1;
        }
        .add-exercise-btn:hover, .edit-day-btn:hover {
            background: #ff5252;
            transform: scale(1.05);
        }
        .edit-day-btn {
            background: var(--secondary);
        }
        .edit-day-btn:hover {
            background: #3aa89d;
        }
        footer {
            text-align: center;
            padding: 30px 0;
            margin-top: 30px;
            color: #aaa;
            font-size: 0.95rem;
            border-top: 1px solid rgba(255,255,255,0.1);
        }
        .progress-bar {
            width: 100%;
            height: 10px;
            background: #333;
            border-radius: 5px;
            margin: 15px 0;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            width: 0%;
            transition: width 0.5s ease;
        }
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--success);
            color: white;
            padding: 15px 25px;
            border-radius: 8px;
            z-index: 10000;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            animation: slideIn 0.3s ease, fadeOut 0.5s ease 2.5s forwards;
        }
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }
        .day-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        @media (max-width: 768px) {
            .exercise-grid {
                grid-template-columns: 1fr;
            }
            h1 {
                font-size: 2.2rem;
            }
            .timer-display {
                font-size: 3rem;
            }
            .week-days {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üèÜ FITNESS PRO</h1>
            <p>Tu entrenador personal inteligente - Planes personalizados y seguimiento profesional</p>
            
            <div class="user-profile">
                <div class="bmi-calculator">
                    <h3>üìä Calculadora IMC</h3>
                    <input type="number" id="weight" placeholder="Peso (kg)" min="30" max="300" step="0.1">
                    <input type="number" id="height" placeholder="Altura (cm)" min="100" max="250">
                    <button id="calculateBMI">Calcular IMC</button>
                    <div class="bmi-result" id="bmiResult">Introduce tus datos</div>
                </div>
                
                <div class="bmi-calculator">
                    <h3>üìà Progreso Semanal</h3>
                    <div class="progress-bar">
                        <div class="progress-fill" id="weeklyProgress" style="width: 65%;"></div>
                    </div>
                    <p>65% completado esta semana</p>
                    <p>Peso actual: <span id="currentWeight">75.5</span> kg</p>
                </div>
            </div>
        </header>

        <div class="timer-section">
            <h2>‚è±Ô∏è Temporizador de Entrenamiento</h2>
            <div class="timer-display" id="timer">05:00</div>
            <div class="timer-controls">
                <button class="start-btn" id="startBtn">‚ñ∂Ô∏è Iniciar</button>
                <button class="pause-btn" id="pauseBtn" disabled>‚è∏Ô∏è Pausar</button>
                <button class="reset-btn" id="resetBtn">‚èπÔ∏è Reiniciar</button>
                <button id="customizeTimer" style="background: var(--accent); color: white; padding: 15px 20px; border: none; border-radius: 10px; cursor: pointer; font-weight: bold;">‚öôÔ∏è Personalizar</button>
            </div>
        </div>

        <div class="workout-section">
            <h2>üí™ Ejercicios Disponibles</h2>
            <div class="exercise-grid" id="exerciseGrid">
                <!-- Los ejercicios se generar√°n aqu√≠ con JavaScript -->
            </div>
        </div>

        <div class="weekly-plan">
            <h2>üìÖ Plan Semanal</h2>
            <div class="week-days" id="weekDays">
                <!-- Los d√≠as de la semana se generar√°n aqu√≠ -->
            </div>
        </div>

        <div class="stats-section">
            <div class="stat-card">
                <h3 id="totalWorkouts">24</h3>
                <p>Entrenamientos Completados</p>
            </div>
            <div class="stat-card">
                <h3 id="totalHours">12.5</h3>
                <p>Horas Entrenadas</p>
            </div>
            <div class="stat-card">
                <h3 id="caloriesBurned">8,450</h3>
                <p>Calor√≠as Quemadas</p>
            </div>
            <div class="stat-card">
                <h3 id="currentStreak">7</h3>
                <p>D√≠as Consecutivos</p>
            </div>
        </div>

        <footer>
            <p> FITNESS PRO ¬© 2024 - Transforma tu cuerpo, transforma tu vida</p>
            <p>Los resultados var√≠an seg√∫n el individuo. Consulta con un profesional antes de comenzar cualquier programa de ejercicio.</p>
        </footer>
    </div>

    <!-- Modal para personalizar ejercicio -->
    <div class="exercise-modal" id="exerciseModal">
        <div class="modal-content">
            <button class="close-modal" id="closeExerciseModal">&times;</button>
            <div class="modal-header">
                <h3 id="modalTitle">Personalizar Ejercicio</h3>
            </div>
            <div class="exercise-form">
                <div class="form-group">
                    <label for="exerciseDuration">Duraci√≥n (segundos)</label>
                    <input type="number" id="exerciseDuration" min="10" max="300" value="45">
                </div>
                <div class="form-group">
                    <label for="exerciseReps">Repeticiones</label>
                    <input type="number" id="exerciseReps" min="1" max="50" value="15">
                </div>
                <div class="form-group">
                    <label for="exerciseSets">Series</label>
                    <input type="number" id="exerciseSets" min="1" max="10" value="3">
                </div>
                <div class="form-group">
                    <label for="exerciseIntensity">Intensidad</label>
                    <select id="exerciseIntensity">
                        <option value="low">Baja</option>
                        <option value="medium" selected>Media</option>
                        <option value="high">Alta</option>
                    </select>
                </div>
                <div class="form-actions">
                    <button class="save-btn" id="saveExerciseSettings">‚úÖ Guardar Configuraci√≥n</button>
                    <button class="cancel-btn" id="cancelExerciseSettings">‚ùå Cancelar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para personalizar temporizador -->
    <div class="exercise-modal" id="timerModal">
        <div class="modal-content">
            <button class="close-modal" id="closeTimerModal">&times;</button>
            <div class="modal-header">
                <h3>Personalizar Temporizador</h3>
            </div>
            <div class="exercise-form">
                <div class="form-group">
                    <label for="timerMinutes">Minutos</label>
                    <input type="number" id="timerMinutes" min="1" max="60" value="5">
                </div>
                <div class="form-group">
                    <label for="timerType">Tipo de Entrenamiento</label>
                    <select id="timerType">
                        <option value="hiit">HIIT (20s ejercicio / 10s descanso)</option>
                        <option value="tabata">Tabata (40s ejercicio / 20s descanso)</option>
                        <option value="custom" selected>Personalizado</option>
                    </select>
                </div>
                <div class="form-actions">
                    <button class="save-btn" id="saveTimerSettings">‚úÖ Aplicar</button>
                    <button class="cancel-btn" id="cancelTimerSettings">‚ùå Cancelar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal para editar d√≠a -->
    <div class="day-modal" id="dayModal">
        <div class="modal-content">
            <button class="close-modal" id="closeDayModal">&times;</button>
            <div class="modal-header">
                <h3 id="dayModalTitle">Editar D√≠a</h3>
            </div>
            <div class="exercise-form">
                <div class="form-group">
                    <label>Selecciona ejercicios para este d√≠a:</label>
                    <div id="dayExercisesList" style="max-height: 300px; overflow-y: auto; margin: 10px 0;">
                        <!-- Lista de ejercicios se generar√° aqu√≠ -->
                    </div>
                </div>
                <div class="form-actions">
                    <button class="save-btn" id="saveDaySettings">‚úÖ Guardar Cambios</button>
                    <button class="cancel-btn" id="cancelDaySettings">‚ùå Cancelar</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Base de datos de ejercicios
        const exercises = [
            {
                id: 1,
                name: "Sentadillas",
                icon: "ü¶µ",
                description: "Pies al ancho de hombros, baja como si te sentaras en una silla. Mant√©n la espalda recta.",
                defaultDuration: 45,
                defaultReps: 15,
                defaultSets: 3,
                caloriesPerMin: 8,
                muscleGroups: ["Piernas", "Gl√∫teos"]
            },
            {
                id: 2,
                name: "Flexiones",
                icon: "üí™",
                description: "Mant√©n el cuerpo recto, baja el pecho hacia el suelo. Codos a 45 grados del cuerpo.",
                defaultDuration: 45,
                defaultReps: 12,
                defaultSets: 3,
                caloriesPerMin: 10,
                muscleGroups: ["Pecho", "Tr√≠ceps", "Hombros"]
            },
            {
                id: 3,
                name: "Plancha",
                icon: "üßò‚Äç‚ôÇÔ∏è",
                description: "Cuerpo recto, codos bajo hombros, mant√©n la posici√≥n sin bajar la cadera.",
                defaultDuration: 30,
                defaultReps: 1,
                defaultSets: 3,
                caloriesPerMin: 5,
                muscleGroups: ["Abdominales", "Core"]
            },
            {
                id: 4,
                name: "Burpees",
                icon: "ü§∏‚Äç‚ôÇÔ∏è",
                description: "De pie, baja al suelo, salta hacia atr√°s, vuelve y salta arriba con las manos.",
                defaultDuration: 45,
                defaultReps: 10,
                defaultSets: 3,
                caloriesPerMin: 12,
                muscleGroups: ["Cardio", "Cuerpo completo"]
            },
            {
                id: 5,
                name: "Mountain Climbers",
                icon: "üèÉ‚Äç‚ôÇÔ∏è",
                description: "En posici√≥n de plancha, lleva rodillas al pecho alternadamente lo m√°s r√°pido posible.",
                defaultDuration: 45,
                defaultReps: 30,
                defaultSets: 3,
                caloriesPerMin: 11,
                muscleGroups: ["Cardio", "Abdominales"]
            },
            {
                id: 6,
                name: "Jumping Jacks",
                icon: "üï∫",
                description: "Salta abriendo piernas y brazos, luego vuelve a cerrarlos. Mant√©n el ritmo constante.",
                defaultDuration: 60,
                defaultReps: 50,
                defaultSets: 3,
                caloriesPerMin: 9,
                muscleGroups: ["Cardio", "Piernas"]
            },
            {
                id: 7,
                name: "Lunges",
                icon: "ü¶µ",
                description: "Da un paso adelante, baja hasta que ambas rodillas formen 90¬∞. Alterna piernas.",
                defaultDuration: 45,
                defaultReps: 12,
                defaultSets: 3,
                caloriesPerMin: 8,
                muscleGroups: ["Piernas", "Gl√∫teos"]
            },
            {
                id: 8,
                name: "Abdominales",
                icon: "ü§∏‚Äç‚ôÄÔ∏è",
                description: "Acostado, levanta torso hacia rodillas, controla la bajada. No tires del cuello.",
                defaultDuration: 45,
                defaultReps: 20,
                defaultSets: 3,
                caloriesPerMin: 7,
                muscleGroups: ["Abdominales"]
            },
            {
                id: 9,
                name: "Zancadas",
                icon: "üö∂‚Äç‚ôÇÔ∏è",
                description: "Caminata con zancadas profundas, manteniendo el equilibrio y la postura.",
                defaultDuration: 60,
                defaultReps: 15,
                defaultSets: 3,
                caloriesPerMin: 9,
                muscleGroups: ["Piernas", "Gl√∫teos"]
            },
            {
                id: 10,
                name: "Puente de Gl√∫teos",
                icon: "üçë",
                description: "Acostado, levanta cadera contrayendo gl√∫teos. Baja lentamente sin tocar el suelo.",
                defaultDuration: 45,
                defaultReps: 15,
                defaultSets: 3,
                caloriesPerMin: 6,
                muscleGroups: ["Gl√∫teos", "Espalda baja"]
            }
        ];

        // Estado de la aplicaci√≥n
        let appState = {
            currentExercise: null,
            currentDayIndex: null,
            timer: {
                minutes: 5,
                seconds: 0,
                totalSeconds: 300,
                isRunning: false,
                isPaused: false,
                interval: null,
                type: "custom"
            },
            userStats: {
                totalWorkouts: 24,
                totalHours: 12.5,
                caloriesBurned: 8450,
                currentStreak: 7,
                weight: 75.5,
                bmi: 0
            },
            weeklyPlan: [
                { day: "Lunes", exercises: ["Sentadillas", "Flexiones", "Plancha"] },
                { day: "Martes", exercises: ["Burpees", "Mountain Climbers"] },
                { day: "Mi√©rcoles", exercises: ["Jumping Jacks", "Lunges", "Abdominales"] },
                { day: "Jueves", exercises: ["Sentadillas", "Puente de Gl√∫teos"] },
                { day: "Viernes", exercises: ["Burpees", "Flexiones", "Plancha"] },
                { day: "S√°bado", exercises: ["Mountain Climbers", "Jumping Jacks", "Zancadas"] },
                { day: "Domingo", exercises: ["Descanso"] }
            ],
            exerciseSettings: {}
        };

        // Elementos del DOM
        const timerDisplay = document.getElementById('timer');
        const startBtn = document.getElementById('startBtn');
        const pauseBtn = document.getElementById('pauseBtn');
        const resetBtn = document.getElementById('resetBtn');
        const exerciseGrid = document.getElementById('exerciseGrid');
        const weekDays = document.getElementById('weekDays');
        const exerciseModal = document.getElementById('exerciseModal');
        const timerModal = document.getElementById('timerModal');
        const dayModal = document.getElementById('dayModal');
        const modalTitle = document.getElementById('modalTitle');
        const dayModalTitle = document.getElementById('dayModalTitle');
        
        // Botones de IMC
        const calculateBMIButton = document.getElementById('calculateBMI');
        const weightInput = document.getElementById('weight');
        const heightInput = document.getElementById('height');
        const bmiResult = document.getElementById('bmiResult');
        
        // Botones de temporizador
        const customizeTimerButton = document.getElementById('customizeTimer');
        const closeTimerModalButton = document.getElementById('closeTimerModal');
        const saveTimerSettingsButton = document.getElementById('saveTimerSettings');
        const cancelTimerSettingsButton = document.getElementById('cancelTimerSettings');
        
        // Botones de ejercicio
        const closeExerciseModalButton = document.getElementById('closeExerciseModal');
        const saveExerciseSettingsButton = document.getElementById('saveExerciseSettings');
        const cancelExerciseSettingsButton = document.getElementById('cancelExerciseSettings');
        
        // Botones de d√≠a
        const closeDayModalButton = document.getElementById('closeDayModal');
        const saveDaySettingsButton = document.getElementById('saveDaySettings');
        const cancelDaySettingsButton = document.getElementById('cancelDaySettings');

        // Inicializar la aplicaci√≥n
        function init() {
            console.log("Inicializando aplicaci√≥n...");
            renderExercises();
            renderWeeklyPlan();
            updateTimerDisplay();
            updateStatsDisplay();
            
            // Event listeners para IMC
            calculateBMIButton.addEventListener('click', calculateBMI);
            weightInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') calculateBMI();
            });
            heightInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') calculateBMI();
            });
            
            // Event listeners para temporizador
            startBtn.addEventListener('click', startTimer);
            pauseBtn.addEventListener('click', pauseTimer);
            resetBtn.addEventListener('click', resetTimer);
            customizeTimerButton.addEventListener('click', customizeTimer);
            closeTimerModalButton.addEventListener('click', closeTimerModal);
            saveTimerSettingsButton.addEventListener('click', saveTimerSettings);
            cancelTimerSettingsButton.addEventListener('click', closeTimerModal);
            
            // Event listeners para ejercicios
            closeExerciseModalButton.addEventListener('click', closeExerciseModal);
            saveExerciseSettingsButton.addEventListener('click', saveExerciseSettings);
            cancelExerciseSettingsButton.addEventListener('click', closeExerciseModal);
            
            // Event listeners para d√≠as
            closeDayModalButton.addEventListener('click', closeDayModal);
            saveDaySettingsButton.addEventListener('click', saveDaySettings);
            cancelDaySettingsButton.addEventListener('click', closeDayModal);
            
            console.log("Aplicaci√≥n inicializada correctamente");
        }

        // Renderizar ejercicios
        function renderExercises() {
            exerciseGrid.innerHTML = '';
            exercises.forEach(exercise => {
                const card = document.createElement('div');
                card.className = 'exercise-card';
                card.innerHTML = `
                    <div class="exercise-icon">${exercise.icon}</div>
                    <h3>${exercise.name}</h3>
                    <p>${exercise.description}</p>
                    <div class="exercise-duration">‚≠ê ${exercise.defaultDuration}s | ${exercise.defaultReps} rep</div>
                `;
                card.addEventListener('click', function() {
                    console.log(`Abriendo modal para: ${exercise.name}`);
                    openExerciseModal(exercise);
                });
                exerciseGrid.appendChild(card);
            });
        }

        // Renderizar plan semanal
        function renderWeeklyPlan() {
            weekDays.innerHTML = '';
            appState.weeklyPlan.forEach((day, index) => {
                const dayCard = document.createElement('div');
                dayCard.className = 'day-card';
                dayCard.setAttribute('data-day-index', index);
                
                let exercisesHTML = '';
                if (day.exercises[0] === "Descanso") {
                    exercisesHTML = '<p style="color: var(--success); font-weight: bold; flex-grow: 1; display: flex; align-items: center; justify-content: center;">üí™ DESCANSO</p>';
                } else {
                    exercisesHTML = day.exercises.map(ex => {
                        if (ex === "Descanso") return "";
                        return `<div class="exercise-item">
                            <span>${ex}</span>
                            <button class="remove-exercise" data-exercise="${ex}">√ó</button>
                        </div>`;
                    }).join('');
                }
                
                dayCard.innerHTML = `
                    <h4>${day.day}</h4>
                    <div class="day-exercises">${exercisesHTML}</div>
                    <div class="day-actions">
                        <button class="add-exercise-btn" data-day-index="${index}">‚ûï A√±adir</button>
                        <button class="edit-day-btn" data-day-index="${index}">‚úèÔ∏è Editar</button>
                    </div>
                `;
                
                // A√±adir evento al bot√≥n de a√±adir
                const addButton = dayCard.querySelector('.add-exercise-btn');
                addButton.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const dayIndex = parseInt(this.getAttribute('data-day-index'));
                    showAddExerciseModal(dayIndex);
                });
                
                // A√±adir evento al bot√≥n de editar
                const editButton = dayCard.querySelector('.edit-day-btn');
                editButton.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const dayIndex = parseInt(this.getAttribute('data-day-index'));
                    openDayModal(dayIndex);
                });
                
                // A√±adir eventos a los botones de eliminar ejercicio
                const removeButtons = dayCard.querySelectorAll('.remove-exercise');
                removeButtons.forEach(button => {
                    button.addEventListener('click', function(e) {
                        e.stopPropagation();
                        const dayIndex = parseInt(dayCard.getAttribute('data-day-index'));
                        const exerciseName = this.getAttribute('data-exercise');
                        removeExerciseFromDay(dayIndex, exerciseName);
                    });
                });
                
                // Evento para hacer clic en la tarjeta del d√≠a
                dayCard.addEventListener('click', function() {
                    const dayIndex = parseInt(this.getAttribute('data-day-index'));
                    openDayModal(dayIndex);
                });
                
                weekDays.appendChild(dayCard);
            });
        }

        // Mostrar modal para a√±adir ejercicio
        function showAddExerciseModal(dayIndex) {
            const exerciseNames = exercises.map(ex => ex.name);
            const exerciseList = exerciseNames.join("\n");
            const selected = prompt(`¬øQu√© ejercicio quieres a√±adir al ${appState.weeklyPlan[dayIndex].day}?\n\n${exerciseList}`);
            
            if (selected && exerciseNames.includes(selected)) {
                if (appState.weeklyPlan[dayIndex].exercises[0] === "Descanso") {
                    appState.weeklyPlan[dayIndex].exercises = [selected];
                } else {
                    appState.weeklyPlan[dayIndex].exercises.push(selected);
                }
                renderWeeklyPlan();
                showNotification(`‚úÖ ${selected} a√±adido a ${appState.weeklyPlan[dayIndex].day}`);
            } else if (selected) {
                alert("Ejercicio no v√°lido. Por favor, selecciona de la lista.");
            }
        }

        // Abrir modal de ejercicio
        function openExerciseModal(exercise) {
            console.log("Abriendo modal de ejercicio:", exercise.name);
            appState.currentExercise = exercise;
            modalTitle.textContent = `Personalizar ${exercise.name}`;
            
            // Cargar configuraci√≥n guardada o usar valores por defecto
            const settings = appState.exerciseSettings[exercise.id] || {
                duration: exercise.defaultDuration,
                reps: exercise.defaultReps,
                sets: exercise.defaultSets,
                intensity: "medium"
            };
            
            document.getElementById('exerciseDuration').value = settings.duration;
            document.getElementById('exerciseReps').value = settings.reps;
            document.getElementById('exerciseSets').value = settings.sets;
            document.getElementById('exerciseIntensity').value = settings.intensity;
            
            exerciseModal.style.display = 'flex';
            console.log("Modal de ejercicio abierto");
        }

        // Guardar configuraci√≥n del ejercicio
        function saveExerciseSettings() {
            if (!appState.currentExercise) {
                console.error("No hay ejercicio seleccionado");
                return;
            }
            
            const duration = parseInt(document.getElementById('exerciseDuration').value);
            const reps = parseInt(document.getElementById('exerciseReps').value);
            const sets = parseInt(document.getElementById('exerciseSets').value);
            const intensity = document.getElementById('exerciseIntensity').value;
            
            if (isNaN(duration) || isNaN(reps) || isNaN(sets)) {
                alert("Por favor, introduce valores v√°lidos");
                return;
            }
            
            const settings = {
                duration: duration,
                reps: reps,
                sets: sets,
                intensity: intensity
            };
            
            appState.exerciseSettings[appState.currentExercise.id] = settings;
            
            // Actualizar la tarjeta del ejercicio
            const cards = document.querySelectorAll('.exercise-card');
            let found = false;
            cards.forEach(card => {
                if (card.querySelector('h3').textContent === appState.currentExercise.name) {
                    card.querySelector('.exercise-duration').textContent = 
                        `‚≠ê ${settings.duration}s | ${settings.reps} rep | ${settings.sets} series`;
                    found = true;
                }
            });
            
            if (found) {
                showNotification(`‚úÖ Configuraci√≥n de ${appState.currentExercise.name} guardada`);
            } else {
                console.warn("No se encontr√≥ la tarjeta del ejercicio para actualizar");
            }
            
            closeExerciseModal();
        }

        // Cerrar modal de ejercicio
        function closeExerciseModal() {
            exerciseModal.style.display = 'none';
            appState.currentExercise = null;
            console.log("Modal de ejercicio cerrado");
        }

        // Calcular IMC
        function calculateBMI() {
            const weight = parseFloat(weightInput.value);
            const height = parseFloat(heightInput.value);
            
            if (isNaN(weight) || isNaN(height) || weight <= 0 || height <= 0) {
                alert("Por favor, introduce valores v√°lidos para peso y altura");
                return;
            }
            
            const heightInMeters = height / 100;
            const bmi = weight / (heightInMeters * heightInMeters);
            const bmiRounded = Math.round(bmi * 10) / 10;
            
            let category = "";
            let color = "";
            
            if (bmi < 18.5) {
                category = "Bajo peso";
                color = "#ff9800";
            } else if (bmi < 25) {
                category = "Peso normal";
                color = "#4caf50";
            } else if (bmi < 30) {
                category = "Sobrepeso";
                color = "#ff9800";
            } else {
                category = "Obesidad";
                color = "#f44336";
            }
            
            bmiResult.innerHTML = `${bmiRounded} - <span style="color: ${color}">${category}</span>`;
            bmiResult.style.backgroundColor = `${color}20`;
            
            appState.userStats.bmi = bmiRounded;
            appState.userStats.weight = weight;
            document.getElementById('currentWeight').textContent = weight.toFixed(1);
            
            showNotification(`üìä IMC calculado: ${bmiRounded} (${category})`);
        }

        // Personalizar temporizador
        function customizeTimer() {
            document.getElementById('timerMinutes').value = appState.timer.minutes;
            document.getElementById('timerType').value = appState.timer.type;
            timerModal.style.display = 'flex';
            console.log("Modal de temporizador abierto");
        }

        // Guardar configuraci√≥n del temporizador
        function saveTimerSettings() {
            const minutes = parseInt(document.getElementById('timerMinutes').value);
            const type = document.getElementById('timerType').value;
            
            if (isNaN(minutes) || minutes < 1 || minutes > 60) {
                alert("Por favor, introduce minutos v√°lidos (1-60)");
                return;
            }
            
            appState.timer.minutes = minutes;
            appState.timer.totalSeconds = minutes * 60;
            appState.timer.seconds = 0;
            appState.timer.type = type;
            
            updateTimerDisplay();
            closeTimerModal();
            showNotification(`‚è±Ô∏è Temporizador configurado a ${minutes} minutos`);
        }

        // Cerrar modal del temporizador
        function closeTimerModal() {
            timerModal.style.display = 'none';
            console.log("Modal de temporizador cerrado");
        }

        // Abrir modal de d√≠a
        function openDayModal(dayIndex) {
            console.log("Abriendo modal para el d√≠a:", appState.weeklyPlan[dayIndex].day);
            appState.currentDayIndex = dayIndex;
            dayModalTitle.textContent = `Editar ${appState.weeklyPlan[dayIndex].day}`;
            
            // Generar lista de ejercicios
            const dayExercisesList = document.getElementById('dayExercisesList');
            dayExercisesList.innerHTML = '';
            
            // Crear checkboxes para todos los ejercicios
            exercises.forEach(exercise => {
                const exerciseDiv = document.createElement('div');
                exerciseDiv.style.padding = '10px';
                exerciseDiv.style.borderBottom = '1px solid rgba(255,255,255,0.1)';
                
                const checkbox = document.createElement('input');
                checkbox.type = 'checkbox';
                checkbox.id = `exercise-${exercise.id}`;
                checkbox.value = exercise.name;
                
                // Marcar como seleccionado si est√° en el plan del d√≠a
                if (appState.weeklyPlan[dayIndex].exercises.includes(exercise.name)) {
                    checkbox.checked = true;
                }
                
                if (appState.weeklyPlan[dayIndex].exercises[0] === "Descanso" && exercise.name === "Descanso") {
                    checkbox.checked = true;
                }
                
                const label = document.createElement('label');
                label.htmlFor = `exercise-${exercise.id}`;
                label.textContent = exercise.name;
                label.style.marginLeft = '10px';
                
                exerciseDiv.appendChild(checkbox);
                exerciseDiv.appendChild(label);
                dayExercisesList.appendChild(exerciseDiv);
            });
            
            // A√±adir opci√≥n de descanso
            const restDiv = document.createElement('div');
            restDiv.style.padding = '10px';
            restDiv.style.borderBottom = '1px solid rgba(255,255,255,0.1)';
            
            const restCheckbox = document.createElement('input');
            restCheckbox.type = 'checkbox';
            restCheckbox.id = 'exercise-rest';
            restCheckbox.value = 'Descanso';
            
            if (appState.weeklyPlan[dayIndex].exercises[0] === "Descanso") {
                restCheckbox.checked = true;
            }
            
            const restLabel = document.createElement('label');
            restLabel.htmlFor = 'exercise-rest';
            restLabel.textContent = 'üí™ Descanso';
            restLabel.style.marginLeft = '10px';
            
            restDiv.appendChild(restCheckbox);
            restDiv.appendChild(restLabel);
            dayExercisesList.appendChild(restDiv);
            
            dayModal.style.display = 'flex';
            console.log("Modal de d√≠a abierto");
        }

        // Guardar cambios del d√≠a
        function saveDaySettings() {
            if (appState.currentDayIndex === null) {
                console.error("No hay d√≠a seleccionado");
                return;
            }
            
            const selectedExercises = [];
            const checkboxes = document.querySelectorAll('#dayExercisesList input[type="checkbox"]');
            
            checkboxes.forEach(checkbox => {
                if (checkbox.checked) {
                    selectedExercises.push(checkbox.value);
                }
            });
            
            // Si no se seleccion√≥ nada, mantener al menos "Descanso"
            if (selectedExercises.length === 0) {
                selectedExercises.push("Descanso");
            }
            
            // Si se seleccion√≥ "Descanso", asegurarse de que sea el √∫nico
            if (selectedExercises.includes("Descanso")) {
                appState.weeklyPlan[appState.currentDayIndex].exercises = ["Descanso"];
            } else {
                appState.weeklyPlan[appState.currentDayIndex].exercises = selectedExercises;
            }
            
            renderWeeklyPlan();
            closeDayModal();
            showNotification(`‚úÖ Plan para ${appState.weeklyPlan[appState.currentDayIndex].day} actualizado`);
        }

        // Cerrar modal de d√≠a
        function closeDayModal() {
            dayModal.style.display = 'none';
            appState.currentDayIndex = null;
            console.log("Modal de d√≠a cerrado");
        }

        // Eliminar ejercicio de d√≠a
        function removeExerciseFromDay(dayIndex, exerciseName) {
            if (appState.weeklyPlan[dayIndex].exercises.length === 1 && appState.weeklyPlan[dayIndex].exercises[0] === "Descanso") {
                // No permitir eliminar el √∫nico ejercicio si es descanso
                return;
            }
            
            appState.weeklyPlan[dayIndex].exercises = appState.weeklyPlan[dayIndex].exercises.filter(ex => ex !== exerciseName);
            
            // Si no quedan ejercicios, a√±adir "Descanso"
            if (appState.weeklyPlan[dayIndex].exercises.length === 0) {
                appState.weeklyPlan[dayIndex].exercises = ["Descanso"];
            }
            
            renderWeeklyPlan();
            showNotification(`‚ùå ${exerciseName} eliminado del ${appState.weeklyPlan[dayIndex].day}`);
        }

        // Temporizador - Actualizar display
        function updateTimerDisplay() {
            timerDisplay.textContent = `${String(appState.timer.minutes).padStart(2, '0')}:${String(appState.timer.seconds).padStart(2, '0')}`;
            
            // Efecto visual cuando queda poco tiempo
            if (appState.timer.totalSeconds <= 10) {
                timerDisplay.style.color = '#ff6b6b';
                timerDisplay.style.textShadow = '0 0 20px #ff6b6b';
            } else {
                timerDisplay.style.color = 'var(--secondary)';
                timerDisplay.style.textShadow = '0 0 10px var(--secondary)';
            }
        }

        // Temporizador - Iniciar
        function startTimer() {
            if (appState.timer.isRunning && !appState.timer.isPaused) return;
            
            appState.timer.isRunning = true;
            appState.timer.isPaused = false;
            startBtn.disabled = true;
            pauseBtn.disabled = false;
            
            appState.timer.interval = setInterval(() => {
                if (appState.timer.totalSeconds > 0) {
                    appState.timer.totalSeconds--;
                    appState.timer.seconds = appState.timer.totalSeconds % 60;
                    appState.timer.minutes = Math.floor(appState.timer.totalSeconds / 60);
                    updateTimerDisplay();
                } else {
                    clearInterval(appState.timer.interval);
                    appState.timer.isRunning = false;
                    startBtn.disabled = false;
                    pauseBtn.disabled = true;
                    completeWorkout();
                    showCompletionMessage();
                }
            }, 1000);
            
            showNotification("‚ñ∂Ô∏è Entrenamiento iniciado");
        }

        // Temporizador - Pausar
        function pauseTimer() {
            if (!appState.timer.isRunning) return;
            
            clearInterval(appState.timer.interval);
            appState.timer.isPaused = true;
            startBtn.disabled = false;
            pauseBtn.disabled = true;
            
            showNotification("‚è∏Ô∏è Entrenamiento pausado");
        }

        // Temporizador - Reiniciar
        function resetTimer() {
            clearInterval(appState.timer.interval);
            appState.timer.isRunning = false;
            appState.timer.isPaused = false;
            appState.timer.totalSeconds = appState.timer.minutes * 60;
            appState.timer.seconds = 0;
            updateTimerDisplay();
            startBtn.disabled = false;
            pauseBtn.disabled = true;
            timerDisplay.style.color = 'var(--secondary)';
            timerDisplay.style.textShadow = '0 0 10px var(--secondary)';
            
            showNotification("‚èπÔ∏è Temporizador reiniciado");
        }

        // Completar entrenamiento
        function completeWorkout() {
            appState.userStats.totalWorkouts++;
            appState.userStats.totalHours += appState.timer.minutes / 60;
            appState.userStats.caloriesBurned += calculateWorkoutCalories();
            appState.userStats.currentStreak++;
            
            updateStatsDisplay();
            saveUserStats();
        }

        // Calcular calor√≠as quemadas en el entrenamiento
        function calculateWorkoutCalories() {
            let totalCalories = 0;
            const workoutMinutes = appState.timer.minutes;
            
            // Calcular basado en ejercicios configurados
            Object.values(appState.exerciseSettings).forEach(settings => {
                const exercise = exercises.find(ex => appState.exerciseSettings[ex.id] === settings);
                if (exercise) {
                    totalCalories += (settings.duration / 60) * exercise.caloriesPerMin * settings.sets;
                }
            });
            
            // Si no hay ejercicios configurados, usar promedio
            if (totalCalories === 0) {
                totalCalories = workoutMinutes * 10; // 10 cal/min promedio
            }
            
            return Math.round(totalCalories);
        }

        // Mostrar mensaje de completado
        function showCompletionMessage() {
            const calories = calculateWorkoutCalories();
            alert(`¬°Felicidades! Has completado tu entrenamiento de ${appState.timer.minutes} minutos.\nCalor√≠as quemadas: ${calories}\n¬°Sigue as√≠!`);
        }

        // Actualizar estad√≠sticas en pantalla
        function updateStatsDisplay() {
            document.getElementById('totalWorkouts').textContent = appState.userStats.totalWorkouts;
            document.getElementById('totalHours').textContent = appState.userStats.totalHours.toFixed(1);
            document.getElementById('caloriesBurned').textContent = appState.userStats.caloriesBurned.toLocaleString();
            document.getElementById('currentStreak').textContent = appState.userStats.currentStreak;
            document.getElementById('currentWeight').textContent = appState.userStats.weight.toFixed(1);
            
            // Actualizar progreso semanal
            const progressPercent = Math.min(100, (appState.userStats.currentStreak / 7) * 100);
            document.getElementById('weeklyProgress').style.width = `${progressPercent}%`;
        }

        // Guardar estad√≠sticas de usuario (simulado)
        function saveUserStats() {
            // En un entorno real, usar√≠as localStorage:
            // localStorage.setItem('fitnessProStats', JSON.stringify(appState.userStats));
        }

        // Mostrar notificaci√≥n
        function showNotification(message) {
            // Eliminar notificaciones anteriores
            const existingNotifications = document.querySelectorAll('.notification');
            existingNotifications.forEach(notification => {
                notification.remove();
            });
            
            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.innerHTML = message;
            document.body.appendChild(notification);
            
            // Eliminar despu√©s de 3 segundos
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.parentNode.removeChild(notification);
                }
            }, 3000);
        }

        // Inicializar la aplicaci√≥n cuando se cargue la p√°gina
        document.addEventListener('DOMContentLoaded', function() {
            console.log("DOM cargado, inicializando aplicaci√≥n...");
            init();
        });
    </script>
</body>
</html>